# ProcessingOrders

ProcessingOrders - это микросервис для обработки заказов, построенный с использованием принципов предметно-ориентированного проектирования (DDD).

## Структура проекта

Проект организован в соответствии с принципами чистой архитектуры и DDD:

- **ProcessingOrders.CoreDomain** - ядро домена, содержащее бизнес-сущности, правила и интерфейсы репозиториев
- **ProcessingOrders.Application** - содержит бизнес-логику приложения, реализованную через команды/запросы (CQRS)
- **ProcessingOrders.Api** - слой API, предоставляющий HTTP-интерфейс для работы с заказами
- **ProcessingOrders.Persistence** - реализация доступа к данным, включая репозитории и Entity Framework
- **ProcessingOrders.Infrastructure** - инфраструктурные сервисы, включая GRPC-клиент для взаимодействия с микросервисом акций

## Основные возможности

- Создание заказа
- Управление статусом заказа (обработка, завершение, отмена)
- Добавление и удаление позиций из заказа
- Автоматический расчет общей стоимости
- Получение информации о заказе и списка заказов клиента
- Интеграция с сервисом акций через gRPC

## API

API документировано с использованием Swagger. После запуска приложения документация доступна по адресу `/swagger`.

Основные конечные точки:

- `POST /api/orders` - создать новый заказ
- `PUT /api/orders/{id}/status` - обновить статус заказа
- `GET /api/orders/{id}` - получить заказ по ID
- `GET /api/orders/customer/{customerId}` - получить список заказов клиента

## Доменная модель

### Агрегат Order

Основной агрегат - `Order`. Агрегат состоит из:
- `Order` - корень агрегата
- `OrderItem` - позиция в заказе
- `OrderEvent` - событие заказа

### Поддержка CQRS

Приложение использует паттерн CQRS через MediatR:
- Команды: CreateOrderCommand, UpdateOrderStatusCommand